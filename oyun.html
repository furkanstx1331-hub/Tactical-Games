<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tactical Dodge</title>

<style>
body{
    margin:0;
    background:radial-gradient(circle,#1e1e1e,#0d0d0d);
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    height:100vh;
    font-family:Arial;
    color:white;
}

#container{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:15px;
}

canvas{
    background:#111;
    border-radius:15px;
    box-shadow:0 0 40px #00ffcc33;
    max-width:95vw;
}

#ui{
    text-align:center;
}

button{
    padding:8px;
    margin:5px;
    background:#00ffcc;
    border:none;
    cursor:pointer;
    font-weight:bold;
    border-radius:8px;
}
button:hover{background:#00ddaa;}

#controls{
    margin-top:10px;
    display:grid;
    grid-template-columns:60px 60px 60px;
    gap:10px;
    justify-content:center;
}
.control-btn{
    background:#333;
    color:white;
    font-size:20px;
    border-radius:10px;
}
</style>
</head>
<body>

<div id="container">
    <canvas id="game" width="400" height="400"></canvas>

    <div id="ui">
        <h3>SKOR: <span id="score">0</span></h3>
        <h3>CAN: ‚ù§Ô∏è <span id="lives">3</span></h3>

        <div>
            <button onclick="setMode('easy')">üü¢ Easy</button>
            <button onclick="setMode('normal')">üü° Normal</button>
            <button onclick="setMode('hard')">üî¥ Hard</button>
        </div>

        <button onclick="init()">Yeniden Ba≈ülat</button>
    </div>

   
    <div id="controls">
        <div></div>
        <button class="control-btn" onclick="move('up')">‚¨Ü</button>
        <div></div>

        <button class="control-btn" onclick="move('left')">‚¨Ö</button>
        <div></div>
        <button class="control-btn" onclick="move('right')">‚û°</button>

        <div></div>
        <button class="control-btn" onclick="move('down')">‚¨á</button>
        <div></div>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let grid = 6;
let size = canvas.width / grid;

let player, gold, enemies, score, speed, moveTimer, enemySpawner, lives;
let mode = "easy";

function setMode(selected){
    mode = selected;
    init();
}

function init(){

    if(mode==="easy"){
        speed = 1500;
        lives = 3;
    }
    if(mode==="normal"){
        speed = 1000;
        lives = 2;
    }
    if(mode==="hard"){
        speed = 700;
        lives = 1;
    }

    player = {x:3,y:3};
    enemies = [];
    score = 0;

    document.getElementById("score").innerText = score;
    document.getElementById("lives").innerText = lives;

    spawnGold();

    clearInterval(moveTimer);
    clearInterval(enemySpawner);

    moveTimer = setInterval(moveEnemies, speed);
    enemySpawner = setInterval(spawnEnemy, 3500);

    draw();
}

function spawnGold(){
    gold = {
        x:Math.floor(Math.random()*grid),
        y:Math.floor(Math.random()*grid)
    };
}

function spawnEnemy(){
    const edge = Math.floor(Math.random()*4);
    let x,y;

    if(edge===0){x=0;y=Math.floor(Math.random()*grid);}
    if(edge===1){x=grid-1;y=Math.floor(Math.random()*grid);}
    if(edge===2){y=0;x=Math.floor(Math.random()*grid);}
    if(edge===3){y=grid-1;x=Math.floor(Math.random()*grid);}

    if(x===player.x && y===player.y) return;

    enemies.push({x,y});
}

function moveEnemies(){
    enemies.forEach(enemy=>{
        const dirs = [
            {dx:1,dy:0},
            {dx:-1,dy:0},
            {dx:0,dy:1},
            {dx:0,dy:-1}
        ];
        const d = dirs[Math.floor(Math.random()*4)];
        let nx = enemy.x + d.dx;
        let ny = enemy.y + d.dy;

        if(nx>=0 && nx<grid) enemy.x = nx;
        if(ny>=0 && ny<grid) enemy.y = ny;
    });

    checkCollision();
    draw();
}

function checkCollision(){
    enemies.forEach(e=>{
        if(e.x===player.x && e.y===player.y){
            lives--;
            document.getElementById("lives").innerText = lives;

            if(lives<=0){
                alert("GAME OVER\nSkor: "+score);
                init();
            }
        }
    });
}

function move(direction){

    if(direction==="up" && player.y>0) player.y--;
    if(direction==="down" && player.y<grid-1) player.y++;
    if(direction==="left" && player.x>0) player.x--;
    if(direction==="right" && player.x<grid-1) player.x++;

    if(player.x===gold.x && player.y===gold.y){
        score++;
        document.getElementById("score").innerText = score;
        spawnGold();

        if(speed>500){
            speed-=50;
            clearInterval(moveTimer);
            moveTimer = setInterval(moveEnemies, speed);
        }
    }

    checkCollision();
    draw();
}

document.addEventListener("keydown",e=>{
    if(e.key==="ArrowUp"||e.key==="w") move("up");
    if(e.key==="ArrowDown"||e.key==="s") move("down");
    if(e.key==="ArrowLeft"||e.key==="a") move("left");
    if(e.key==="ArrowRight"||e.key==="d") move("right");
});

function drawGrid(){
    for(let i=0;i<grid;i++){
        for(let j=0;j<grid;j++){
            ctx.strokeStyle="#222";
            ctx.strokeRect(i*size,j*size,size,size);
        }
    }
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawGrid();

    ctx.fillStyle="gold";
    ctx.beginPath();
    ctx.arc(gold.x*size+size/2,gold.y*size+size/2,size/4,0,Math.PI*2);
    ctx.fill();


    ctx.fillStyle="#00ffcc";
    ctx.fillRect(player.x*size+10,player.y*size+10,size-20,size-20);

   
    enemies.forEach(enemy=>{
        ctx.fillStyle="red";
        ctx.fillRect(enemy.x*size+10,enemy.y*size+10,size-20,size-20);
    });
}

init();
</script>

</body>
</html>
